<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hwlib: hwlib::spi_bus Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="hwlib_icon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hwlib
   </div>
   <div id="projectbrief">C++ OO-style close-to-the-hardware library</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classhwlib_1_1spi__bus.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classhwlib_1_1spi__bus-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">hwlib::spi_bus Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>spi bus interface  
 <a href="classhwlib_1_1spi__bus.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="hwlib-spi_8hpp_source.html">hwlib-spi.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for hwlib::spi_bus:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classhwlib_1_1spi__bus.png" usemap="#hwlib::spi_5Fbus_map" alt=""/>
  <map id="hwlib::spi_5Fbus_map" name="hwlib::spi_5Fbus_map">
<area href="classhwlib_1_1spi__bus__bit__banged__sclk__mosi__miso.html" title="bit-banged SPI bus implementation" alt="hwlib::spi_bus_bit_banged_sclk_mosi_miso" shape="rect" coords="0,56,252,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhwlib_1_1spi__bus_1_1spi__transaction.html">spi_transaction</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">spi transaction object  <a href="classhwlib_1_1spi__bus_1_1spi__transaction.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad28cd2173d2401a5a4437ff1d76175b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classhwlib_1_1spi__bus_1_1spi__transaction.html">spi_transaction</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhwlib_1_1spi__bus.html#ad28cd2173d2401a5a4437ff1d76175b5">transaction</a> (<a class="el" href="classhwlib_1_1pin__out.html">pin_out</a> &amp;sel)</td></tr>
<tr class="memdesc:ad28cd2173d2401a5a4437ff1d76175b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">spi read-and-write transaction  <a href="#ad28cd2173d2401a5a4437ff1d76175b5">More...</a><br /></td></tr>
<tr class="separator:ad28cd2173d2401a5a4437ff1d76175b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a23d4f1ca4950a4246d61609c0c5b70f3"><td class="memItemLeft" align="right" valign="top"><a id="a23d4f1ca4950a4246d61609c0c5b70f3"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>spi_transaction</b></td></tr>
<tr class="separator:a23d4f1ca4950a4246d61609c0c5b70f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>spi bus interface </p>
<p>This class abstracts the interface of a master to a SPI bus.</p>
<p>The SPI (Serial Peripheral Interface) protocol is based on shift registers. The master (in most cases the micro-controller) generates clock pulses (SCLK), and on each pulse one bit of data is transferred from the shift register inside the master to the shift register inside the slave, AND one bit is transferred in the other direction. After N clock pulses, all N data bits in the master and the slave are exchanged. The MOSI line transfers data from master to slave (Master Out Slave In), the MISO (Master In Slave Out) line transfers data from the slave to the master.</p>
<div class="image">
<img src="spi-master-slave.png" alt="spi-master-slave.png"/>
</div>
<p>The SS (Slave Select) line is used to signal the start and end of a SPOI transfer. In most cases, the select line is active low.</p>
<div class="image">
<img src="spi-select-1.png" alt="spi-select-1.png"/>
</div>
<p>A SPI bus can have multiple slaves. All slaves (and the master) share the MOSI, MISO and SLCK lines. Each slave has a separate SS line, that is used to activate a single slave for a transfer.</p>
<div class="image">
<img src="spi-select-2.png" alt="spi-select-2.png"/>
</div>
<p>The SPI bus is a de-facto standard: there is no official document that defines it, but various manufacturers agree on how it should work and (more or less!) implement it the same. But there are differences that might give problems:</p><ul>
<li>the polarity (active low or active high) of the SS line</li>
<li>the initial level of the clock</li>
<li>the polarity of the clock (the clock edge on which the master and slave transfer data)</li>
<li>the (maximum) clock frequency</li>
</ul>
<p>As always, consult the datasheet of the chip for the details.</p>
<p>references:</p><ul>
<li><a href="https://embeddedmicro.com/tutorials/mojo/serial-peripheral-interface-spi">SPI explanation</a> (Embedded Micro Forum)</li>
<li><a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus">Serial Peripheral Bus</a> (wikipedia) </li>
</ul>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ad28cd2173d2401a5a4437ff1d76175b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad28cd2173d2401a5a4437ff1d76175b5">&#9670;&nbsp;</a></span>transaction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classhwlib_1_1spi__bus_1_1spi__transaction.html">spi_transaction</a> hwlib::spi_bus::transaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classhwlib_1_1pin__out.html">pin_out</a> &amp;&#160;</td>
          <td class="paramname"><em>sel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>spi read-and-write transaction </p>
<p>This function creates and returns a SPI transaction object for the spi bus and the indicated sel pin. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="hwlib-spi_8hpp_source.html">hwlib-spi.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacehwlib.html">hwlib</a></li><li class="navelem"><a class="el" href="classhwlib_1_1spi__bus.html">spi_bus</a></li>
<<<<<<< HEAD
    <li class="footer">Generated on Sat Feb 16 2019 11:36:53 for hwlib by
=======
    <li class="footer">Generated on Mon Feb 11 2019 09:25:52 for hwlib by
>>>>>>> 988db6fa2eaf481e36194d7a8978883edd42cbd3
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
